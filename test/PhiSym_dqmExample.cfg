process test={
    
  #  untracked PSet maxEvents = {untracked int32 input = -1}
    untracked PSet maxEvents = {untracked int32 input = 200}

#----------------------------------------------------- 
   
# insert data 
 source = PoolSource
	{
		untracked vstring fileNames = 
			{

	'file:/afs/cern.ch/user/g/gozzelin/scratch0/uncalibcompare_big.root'

			}// end file names
	}

# -------------------------------------------------------

# config problem solving
include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
include "Geometry/CaloEventSetup/data/CaloGeometry.cff"

#------------------------------------------------------------------

#### include this to get DQM histogramming services

    ####
    include "DQMServices/Core/data/DQM.cfg"

    #### optionally replace defaults in DQMStore and DQM  
    ####
    # replace DQMStore.verbose = 0 
    # replace DQMStore.referenceFileName = ""
    ####
    # replace DQM.collectorHost = localhost 
    # replace DQM.collectorPort = 9090
    # replace DQM.publishFrequency = 5
    # replace DQM.debug = false

#-----------------------------------------------------------------

    # DQM Source program 
    # code in DQMServices/Daemon/src/DQMSourceExample.cc

    module dqmSource = DQMSourcePhiSym
	{
		# Base name for monitor folders and output file		
       		 untracked string monitorName = "ECAL"
		# Operate every N events (default: -1 no prescale)
		untracked int32 prescaleEvt = 1
    	}

#----------------------------------------------------------------

    # run the quality tests as defined in QualityTests.xml
    module qTester = QualityTester
	{
	untracked int32 QualityTestPrescaler = 2
    	untracked FileInPath qtList = "DQMServices/Examples/test/QualityTests.xml"
	}

#----------------------------------------------------------

    # DQM Client program
    # code in DQMServices/Examples/src/DQMClientPhiSym.cc
    # notes:
   module dqmClient = DQMClientPhiSym
	{
		# Base name for monitor folders and output file		
		untracked string monitorName = "ECAL"
		# Operate every N lumi sections
		untracked int32 prescaleLS  = -1
		# Operate every N events
		untracked int32 prescaleEvt  = 1
    	}

#-------------------------------------------------------

    # output into logfiles (verbose)
    service = MessageLogger 
	{
        	untracked vstring destinations = { 
            		"detailedInfo" , "critical" , "cout"
        	}
        	untracked vstring debugModules = { "*" }
        	untracked PSet critical     = { untracked string threshold = "ERROR"   }
       		untracked PSet detailedInfo = { untracked string threshold = "INFO"    } 
        	untracked PSet cout = {
            		untracked string threshold = "WARNING"
            		untracked bool noLineBreaks = true
            		untracked PSet WARNING = {untracked int32 limit = 0 }
        	}
    	}

    #########################################################
    #### BEGIN DQM Online Environment #######################
    #########################################################
    
    #### PUT THE FOLLOWING INTO YOUR PATH FOR OPERATION AT P5
    #### REPLACE YourSubsystemName by the name of your source ###
    
    # use include file for dqmEnv dqmSaver
       include "DQMServices/Components/data/DQMEnvironment.cfi"
       	# Possible conevntions are "Online","Offline" and "RelVal"
	# default is "Offline"
	replace dqmSaver.convention ="Online"

	# This is the filename prefix
	replace dqmSaver.producer="DQM"
       
	# name of processing workflow
	//replace dqmSaver.workflow = ""

       # optionally change fileSaving  conditions
       // replace dqmSaver.saveByLumiSection =   -1
       // replace dqmSaver.saveByMinute = -1 # in minutes
       // replace dqmSaver.saveByRun = 1 

       replace dqmSaver.saveByEvent =  200
       replace dqmSaver.saveAtJobEnd = true // default is false


	# (this goes into the foldername)
       replace dqmEnv.subSystemFolder = "ECAL"


       # will add switch to select histograms to be saved soon
   
    #########################################################
    #### END ################################################
    #########################################################
 
    ### FIX YOUR  PATH TO INCLUDE dqmEnv and dqmSaver


   path p ={dqmSource & qTester & dqmClient & dqmEnv & dqmSaver }

} 

